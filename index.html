<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HD ENGINE - High Resolution</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-950 text-white font-sans min-h-screen flex items-center justify-center p-6">
    
    <div class="w-full max-w-md bg-slate-900 border border-slate-800 p-8 rounded-3xl shadow-2xl">
        <h1 class="text-3xl font-black tracking-tighter mb-2 bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent">HD ENGINE v1</h1>
        <p class="text-slate-500 text-xs mb-8">Tingkatkan resolusi & ketajaman foto secara instan.</p>

        <div class="group relative border-2 border-dashed border-slate-700 rounded-2xl p-8 mb-6 hover:border-cyan-500 transition-all cursor-pointer bg-slate-800/50" onclick="document.getElementById('foto').click()">
            <div class="text-center">
                <p class="text-slate-400 text-sm font-medium">Klik untuk Pilih Foto</p>
                <p class="text-slate-600 text-[10px] mt-1">PNG, JPG up to 10MB</p>
            </div>
            <input type="file" id="foto" accept="image/*" class="hidden">
        </div>

        <button id="btn" class="w-full bg-cyan-500 hover:bg-cyan-400 text-slate-950 font-bold py-4 rounded-2xl transition-all shadow-[0_0_20px_rgba(6,182,212,0.3)] active:scale-95">BOOST RESOLUTION</button>

        <div id="loading" class="hidden mt-6 text-center space-y-3">
            <div class="inline-block animate-spin rounded-full h-6 w-6 border-2 border-cyan-500 border-t-transparent"></div>
            <p class="text-[10px] tracking-widest text-cyan-500 font-bold uppercase">Processing Image...</p>
        </div>

        <div id="hasil" class="hidden mt-8 space-y-4 animate-in fade-in duration-500">
            <div class="relative rounded-xl overflow-hidden border border-slate-700 shadow-2xl">
                <img id="imgHasil" src="" class="w-full h-auto">
            </div>
            <a id="download" href="#" target="_blank" class="block w-full text-center bg-slate-800 hover:bg-slate-700 py-3 rounded-xl text-sm font-bold border border-slate-700 transition">DOWNLOAD HD IMAGE</a>
        </div>
    </div>

    <script>
        const btn = document.getElementById('btn');
        const fotoInput = document.getElementById('foto');
        const loading = document.getElementById('loading');
        const hasil = document.getElementById('hasil');

        btn.onclick = async () => {
            const file = fotoInput.files[0];
            if(!file) return alert('Silakan pilih foto terlebih dahulu!');

            // UI State
            btn.disabled = true;
            loading.classList.remove('hidden');
            hasil.classList.add('hidden');

            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async () => {
                try {
                    const response = await fetch('/api/upscale', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ image: reader.result })
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok && data.url) {
                        document.getElementById('imgHasil').src = data.url;
                        document.getElementById('download').href = data.url;
                        hasil.classList.remove('hidden');
                    } else {
                        alert("Gagal: " + (data.error || "Terjadi kesalahan sistem."));
                    }
                } catch (e) {
                    alert("Koneksi Error: Pastikan internet stabil.");
                } finally {
                    btn.disabled = false;
                    loading.classList.add('hidden');
                }
            };
        };
    </script>
</body>
</html>
            const file = document.getElementById('foto').files[0];
            if(!file) return alert('Pilih foto!');

            btn.disabled = true;
            document.getElementById('loading').classList.remove('hidden');
            document.getElementById('hasil').classList.add('hidden');

            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async () => {
                try {
                    const res = await fetch('/api/upscale', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ image: reader.result })
                    });
                    const data = await res.json();
                    if(data.url) {
                        document.getElementById('imgHasil').src = data.url;
                        document.getElementById('download').href = data.url;
                        document.getElementById('hasil').classList.remove('hidden');
                    }
                } catch (e) { alert("Error!"); }
                finally {
                    btn.disabled = false;
                    document.getElementById('loading').classList.add('hidden');
                }
            };
        };
    </script>
</body>
</html>
